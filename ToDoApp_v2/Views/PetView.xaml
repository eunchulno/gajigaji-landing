<UserControl x:Class="SlimeTodo.Views.PetView"
             xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
             xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
             xmlns:models="clr-namespace:SlimeTodo.Models"
             xmlns:converters="clr-namespace:SlimeTodo.Converters">

    <UserControl.Resources>
        <converters:BoolToVisibilityConverter x:Key="BoolToVis"/>

        <!-- Eggplant Colors -->
        <Color x:Key="EggplantBodyColor">#5D3A6E</Color>
        <Color x:Key="EggplantBodyDarkColor">#4A2D58</Color>
        <Color x:Key="EggplantHighlightColor">#7B4F8B</Color>
        <Color x:Key="EggplantStemColor">#6B8E23</Color>
        <Color x:Key="EggplantStemDarkColor">#556B2F</Color>

        <!-- Gentle Sway Animation (느긋한 흔들림) -->
        <Storyboard x:Key="SwayAnimation" RepeatBehavior="Forever">
            <DoubleAnimationUsingKeyFrames Storyboard.TargetName="EggplantBody"
                                           Storyboard.TargetProperty="(UIElement.RenderTransform).(TransformGroup.Children)[0].(RotateTransform.Angle)">
                <EasingDoubleKeyFrame KeyTime="0:0:0" Value="0"/>
                <EasingDoubleKeyFrame KeyTime="0:0:2" Value="3">
                    <EasingDoubleKeyFrame.EasingFunction>
                        <SineEase EasingMode="EaseInOut"/>
                    </EasingDoubleKeyFrame.EasingFunction>
                </EasingDoubleKeyFrame>
                <EasingDoubleKeyFrame KeyTime="0:0:4" Value="0">
                    <EasingDoubleKeyFrame.EasingFunction>
                        <SineEase EasingMode="EaseInOut"/>
                    </EasingDoubleKeyFrame.EasingFunction>
                </EasingDoubleKeyFrame>
                <EasingDoubleKeyFrame KeyTime="0:0:6" Value="-3">
                    <EasingDoubleKeyFrame.EasingFunction>
                        <SineEase EasingMode="EaseInOut"/>
                    </EasingDoubleKeyFrame.EasingFunction>
                </EasingDoubleKeyFrame>
                <EasingDoubleKeyFrame KeyTime="0:0:8" Value="0">
                    <EasingDoubleKeyFrame.EasingFunction>
                        <SineEase EasingMode="EaseInOut"/>
                    </EasingDoubleKeyFrame.EasingFunction>
                </EasingDoubleKeyFrame>
            </DoubleAnimationUsingKeyFrames>
        </Storyboard>

        <!-- Look Left Animation (왼쪽 보기) -->
        <Storyboard x:Key="LookLeftAnimation">
            <DoubleAnimationUsingKeyFrames Storyboard.TargetName="LeftEye"
                                           Storyboard.TargetProperty="(Canvas.Left)">
                <EasingDoubleKeyFrame KeyTime="0:0:0" Value="22"/>
                <EasingDoubleKeyFrame KeyTime="0:0:0.3" Value="20">
                    <EasingDoubleKeyFrame.EasingFunction>
                        <QuadraticEase EasingMode="EaseOut"/>
                    </EasingDoubleKeyFrame.EasingFunction>
                </EasingDoubleKeyFrame>
                <EasingDoubleKeyFrame KeyTime="0:0:1.5" Value="20"/>
                <EasingDoubleKeyFrame KeyTime="0:0:1.8" Value="22">
                    <EasingDoubleKeyFrame.EasingFunction>
                        <QuadraticEase EasingMode="EaseOut"/>
                    </EasingDoubleKeyFrame.EasingFunction>
                </EasingDoubleKeyFrame>
            </DoubleAnimationUsingKeyFrames>
            <DoubleAnimationUsingKeyFrames Storyboard.TargetName="RightEye"
                                           Storyboard.TargetProperty="(Canvas.Left)">
                <EasingDoubleKeyFrame KeyTime="0:0:0" Value="42"/>
                <EasingDoubleKeyFrame KeyTime="0:0:0.3" Value="40">
                    <EasingDoubleKeyFrame.EasingFunction>
                        <QuadraticEase EasingMode="EaseOut"/>
                    </EasingDoubleKeyFrame.EasingFunction>
                </EasingDoubleKeyFrame>
                <EasingDoubleKeyFrame KeyTime="0:0:1.5" Value="40"/>
                <EasingDoubleKeyFrame KeyTime="0:0:1.8" Value="42">
                    <EasingDoubleKeyFrame.EasingFunction>
                        <QuadraticEase EasingMode="EaseOut"/>
                    </EasingDoubleKeyFrame.EasingFunction>
                </EasingDoubleKeyFrame>
            </DoubleAnimationUsingKeyFrames>
        </Storyboard>

        <!-- Look Right Animation (오른쪽 보기) -->
        <Storyboard x:Key="LookRightAnimation">
            <DoubleAnimationUsingKeyFrames Storyboard.TargetName="LeftEye"
                                           Storyboard.TargetProperty="(Canvas.Left)">
                <EasingDoubleKeyFrame KeyTime="0:0:0" Value="22"/>
                <EasingDoubleKeyFrame KeyTime="0:0:0.3" Value="24">
                    <EasingDoubleKeyFrame.EasingFunction>
                        <QuadraticEase EasingMode="EaseOut"/>
                    </EasingDoubleKeyFrame.EasingFunction>
                </EasingDoubleKeyFrame>
                <EasingDoubleKeyFrame KeyTime="0:0:1.5" Value="24"/>
                <EasingDoubleKeyFrame KeyTime="0:0:1.8" Value="22">
                    <EasingDoubleKeyFrame.EasingFunction>
                        <QuadraticEase EasingMode="EaseOut"/>
                    </EasingDoubleKeyFrame.EasingFunction>
                </EasingDoubleKeyFrame>
            </DoubleAnimationUsingKeyFrames>
            <DoubleAnimationUsingKeyFrames Storyboard.TargetName="RightEye"
                                           Storyboard.TargetProperty="(Canvas.Left)">
                <EasingDoubleKeyFrame KeyTime="0:0:0" Value="42"/>
                <EasingDoubleKeyFrame KeyTime="0:0:0.3" Value="44">
                    <EasingDoubleKeyFrame.EasingFunction>
                        <QuadraticEase EasingMode="EaseOut"/>
                    </EasingDoubleKeyFrame.EasingFunction>
                </EasingDoubleKeyFrame>
                <EasingDoubleKeyFrame KeyTime="0:0:1.5" Value="44"/>
                <EasingDoubleKeyFrame KeyTime="0:0:1.8" Value="42">
                    <EasingDoubleKeyFrame.EasingFunction>
                        <QuadraticEase EasingMode="EaseOut"/>
                    </EasingDoubleKeyFrame.EasingFunction>
                </EasingDoubleKeyFrame>
            </DoubleAnimationUsingKeyFrames>
        </Storyboard>

        <!-- Blink Animation (눈 깜빡임) -->
        <Storyboard x:Key="BlinkAnimation">
            <DoubleAnimationUsingKeyFrames Storyboard.TargetName="LeftEye"
                                           Storyboard.TargetProperty="(UIElement.RenderTransform).(ScaleTransform.ScaleY)">
                <EasingDoubleKeyFrame KeyTime="0:0:0" Value="1"/>
                <EasingDoubleKeyFrame KeyTime="0:0:0.05" Value="0.1"/>
                <EasingDoubleKeyFrame KeyTime="0:0:0.15" Value="1"/>
            </DoubleAnimationUsingKeyFrames>
            <DoubleAnimationUsingKeyFrames Storyboard.TargetName="RightEye"
                                           Storyboard.TargetProperty="(UIElement.RenderTransform).(ScaleTransform.ScaleY)">
                <EasingDoubleKeyFrame KeyTime="0:0:0" Value="1"/>
                <EasingDoubleKeyFrame KeyTime="0:0:0.05" Value="0.1"/>
                <EasingDoubleKeyFrame KeyTime="0:0:0.15" Value="1"/>
            </DoubleAnimationUsingKeyFrames>
        </Storyboard>

        <!-- Poke Animation (클릭 시 통통 튀기) -->
        <Storyboard x:Key="PokeAnimation">
            <DoubleAnimationUsingKeyFrames Storyboard.TargetName="EggplantBody"
                                           Storyboard.TargetProperty="(UIElement.RenderTransform).(TransformGroup.Children)[1].(TranslateTransform.Y)">
                <EasingDoubleKeyFrame KeyTime="0:0:0" Value="0"/>
                <EasingDoubleKeyFrame KeyTime="0:0:0.1" Value="-8">
                    <EasingDoubleKeyFrame.EasingFunction>
                        <QuadraticEase EasingMode="EaseOut"/>
                    </EasingDoubleKeyFrame.EasingFunction>
                </EasingDoubleKeyFrame>
                <EasingDoubleKeyFrame KeyTime="0:0:0.2" Value="0">
                    <EasingDoubleKeyFrame.EasingFunction>
                        <BounceEase Bounces="2" Bounciness="3" EasingMode="EaseOut"/>
                    </EasingDoubleKeyFrame.EasingFunction>
                </EasingDoubleKeyFrame>
            </DoubleAnimationUsingKeyFrames>
            <DoubleAnimationUsingKeyFrames Storyboard.TargetName="EggplantBody"
                                           Storyboard.TargetProperty="(UIElement.RenderTransform).(TransformGroup.Children)[0].(RotateTransform.Angle)">
                <EasingDoubleKeyFrame KeyTime="0:0:0" Value="0"/>
                <EasingDoubleKeyFrame KeyTime="0:0:0.08" Value="-5"/>
                <EasingDoubleKeyFrame KeyTime="0:0:0.16" Value="5"/>
                <EasingDoubleKeyFrame KeyTime="0:0:0.24" Value="-3"/>
                <EasingDoubleKeyFrame KeyTime="0:0:0.32" Value="0">
                    <EasingDoubleKeyFrame.EasingFunction>
                        <QuadraticEase EasingMode="EaseOut"/>
                    </EasingDoubleKeyFrame.EasingFunction>
                </EasingDoubleKeyFrame>
            </DoubleAnimationUsingKeyFrames>
        </Storyboard>

        <!-- Yawn Animation (하품) -->
        <Storyboard x:Key="YawnAnimation">
            <!-- 하품할 때 눈 감기 -->
            <DoubleAnimationUsingKeyFrames Storyboard.TargetName="LeftEye"
                                           Storyboard.TargetProperty="(UIElement.RenderTransform).(ScaleTransform.ScaleY)">
                <EasingDoubleKeyFrame KeyTime="0:0:0" Value="1"/>
                <EasingDoubleKeyFrame KeyTime="0:0:0.3" Value="0.1"/>
                <EasingDoubleKeyFrame KeyTime="0:0:1.8" Value="0.1"/>
                <EasingDoubleKeyFrame KeyTime="0:0:2.2" Value="1"/>
            </DoubleAnimationUsingKeyFrames>
            <DoubleAnimationUsingKeyFrames Storyboard.TargetName="RightEye"
                                           Storyboard.TargetProperty="(UIElement.RenderTransform).(ScaleTransform.ScaleY)">
                <EasingDoubleKeyFrame KeyTime="0:0:0" Value="1"/>
                <EasingDoubleKeyFrame KeyTime="0:0:0.3" Value="0.1"/>
                <EasingDoubleKeyFrame KeyTime="0:0:1.8" Value="0.1"/>
                <EasingDoubleKeyFrame KeyTime="0:0:2.2" Value="1"/>
            </DoubleAnimationUsingKeyFrames>
            <!-- 하품 입 표시/숨기기 -->
            <ObjectAnimationUsingKeyFrames Storyboard.TargetName="YawnMouth"
                                           Storyboard.TargetProperty="Visibility">
                <DiscreteObjectKeyFrame KeyTime="0:0:0" Value="{x:Static Visibility.Collapsed}"/>
                <DiscreteObjectKeyFrame KeyTime="0:0:0.2" Value="{x:Static Visibility.Visible}"/>
                <DiscreteObjectKeyFrame KeyTime="0:0:2.0" Value="{x:Static Visibility.Collapsed}"/>
            </ObjectAnimationUsingKeyFrames>
            <!-- 하품 입 크기 애니메이션 -->
            <DoubleAnimationUsingKeyFrames Storyboard.TargetName="YawnMouth"
                                           Storyboard.TargetProperty="(UIElement.RenderTransform).(ScaleTransform.ScaleY)">
                <EasingDoubleKeyFrame KeyTime="0:0:0.2" Value="0.3"/>
                <EasingDoubleKeyFrame KeyTime="0:0:0.6" Value="1">
                    <EasingDoubleKeyFrame.EasingFunction>
                        <QuadraticEase EasingMode="EaseOut"/>
                    </EasingDoubleKeyFrame.EasingFunction>
                </EasingDoubleKeyFrame>
                <EasingDoubleKeyFrame KeyTime="0:0:1.5" Value="1"/>
                <EasingDoubleKeyFrame KeyTime="0:0:2.0" Value="0.3">
                    <EasingDoubleKeyFrame.EasingFunction>
                        <QuadraticEase EasingMode="EaseIn"/>
                    </EasingDoubleKeyFrame.EasingFunction>
                </EasingDoubleKeyFrame>
            </DoubleAnimationUsingKeyFrames>
            <!-- 하품할 때 몸 살짝 기울이기 -->
            <DoubleAnimationUsingKeyFrames Storyboard.TargetName="EggplantBody"
                                           Storyboard.TargetProperty="(UIElement.RenderTransform).(TransformGroup.Children)[0].(RotateTransform.Angle)">
                <EasingDoubleKeyFrame KeyTime="0:0:0" Value="0"/>
                <EasingDoubleKeyFrame KeyTime="0:0:0.5" Value="-5">
                    <EasingDoubleKeyFrame.EasingFunction>
                        <QuadraticEase EasingMode="EaseOut"/>
                    </EasingDoubleKeyFrame.EasingFunction>
                </EasingDoubleKeyFrame>
                <EasingDoubleKeyFrame KeyTime="0:0:1.5" Value="-5"/>
                <EasingDoubleKeyFrame KeyTime="0:0:2.2" Value="0">
                    <EasingDoubleKeyFrame.EasingFunction>
                        <QuadraticEase EasingMode="EaseOut"/>
                    </EasingDoubleKeyFrame.EasingFunction>
                </EasingDoubleKeyFrame>
            </DoubleAnimationUsingKeyFrames>
        </Storyboard>
    </UserControl.Resources>

    <UserControl.Triggers>
        <EventTrigger RoutedEvent="Loaded">
            <BeginStoryboard Storyboard="{StaticResource SwayAnimation}"/>
        </EventTrigger>
    </UserControl.Triggers>

    <Grid VerticalAlignment="Bottom" Margin="0,0,0,0" Opacity="0.9">
        <StackPanel HorizontalAlignment="Right">
            <!-- Speech Bubble (작은 혼잣말 느낌) -->
            <Border Visibility="{Binding ShowMessage, Converter={StaticResource BoolToVis}}"
                    Background="White"
                    Opacity="0.85"
                    CornerRadius="12"
                    Padding="10,6"
                    Margin="0,0,0,4"
                    HorizontalAlignment="Center"
                    MaxWidth="140">
                <Border.Effect>
                    <DropShadowEffect BlurRadius="6" ShadowDepth="1" Opacity="0.08"/>
                </Border.Effect>
                <TextBlock Text="{Binding PetMessage}"
                           FontFamily="{StaticResource GalmuriFont}"
                           FontSize="11"
                           Foreground="#222"
                           TextWrapping="Wrap"
                           TextAlignment="Center"/>
            </Border>

            <!-- Eggplant Character (smaller for corner) -->
            <Canvas x:Name="EggplantBody" Width="56" Height="80" HorizontalAlignment="Center"
                    RenderTransformOrigin="0.5,1"
                    Cursor="Hand"
                    MouseLeftButtonDown="EggplantBody_MouseLeftButtonDown">
                <Canvas.LayoutTransform>
                    <ScaleTransform ScaleX="0.8" ScaleY="0.8"/>
                </Canvas.LayoutTransform>
                <Canvas.RenderTransform>
                    <TransformGroup>
                        <RotateTransform Angle="0"/>
                        <TranslateTransform Y="0"/>
                    </TransformGroup>
                </Canvas.RenderTransform>

                <!-- Stem (꼭지) -->
                <Path Canvas.Left="22" Canvas.Top="0">
                    <Path.Data>
                        <PathGeometry>
                            <PathFigure StartPoint="13,20" IsClosed="True">
                                <BezierSegment Point1="8,10" Point2="5,5" Point3="13,0"/>
                                <BezierSegment Point1="21,5" Point2="18,10" Point3="13,20"/>
                            </PathFigure>
                        </PathGeometry>
                    </Path.Data>
                    <Path.Fill>
                        <LinearGradientBrush StartPoint="0,0" EndPoint="1,1">
                            <GradientStop Color="{StaticResource EggplantStemColor}" Offset="0"/>
                            <GradientStop Color="{StaticResource EggplantStemDarkColor}" Offset="1"/>
                        </LinearGradientBrush>
                    </Path.Fill>
                </Path>

                <!-- Main Body (통통한 가지 모양) -->
                <Path Canvas.Left="5" Canvas.Top="15">
                    <Path.Data>
                        <PathGeometry>
                            <PathFigure StartPoint="30,0" IsClosed="True">
                                <BezierSegment Point1="50,0" Point2="60,20" Point3="58,45"/>
                                <BezierSegment Point1="56,65" Point2="45,80" Point3="30,80"/>
                                <BezierSegment Point1="15,80" Point2="4,65" Point3="2,45"/>
                                <BezierSegment Point1="0,20" Point2="10,0" Point3="30,0"/>
                            </PathFigure>
                        </PathGeometry>
                    </Path.Data>
                    <Path.Fill>
                        <RadialGradientBrush GradientOrigin="0.3,0.3" Center="0.4,0.4">
                            <GradientStop Color="{StaticResource EggplantHighlightColor}" Offset="0"/>
                            <GradientStop Color="{StaticResource EggplantBodyColor}" Offset="0.5"/>
                            <GradientStop Color="{StaticResource EggplantBodyDarkColor}" Offset="1"/>
                        </RadialGradientBrush>
                    </Path.Fill>
                </Path>

                <!-- Highlight (광택) -->
                <Ellipse Canvas.Left="15" Canvas.Top="25" Width="12" Height="20"
                         Fill="White" Opacity="0.25"/>

                <!-- Eyes (애니메이션용 - 항상 표시, Normal/Worried 표정에서만 보임) -->
                <Ellipse x:Name="LeftEye" Canvas.Left="22" Canvas.Top="45" Width="6" Height="8" Fill="#F5F5F5"
                         RenderTransformOrigin="0.5,0.5">
                    <Ellipse.Style>
                        <Style TargetType="Ellipse">
                            <Setter Property="Visibility" Value="Visible"/>
                            <Style.Triggers>
                                <DataTrigger Binding="{Binding PetMood}" Value="{x:Static models:PetMood.Excited}">
                                    <Setter Property="Visibility" Value="Collapsed"/>
                                </DataTrigger>
                                <DataTrigger Binding="{Binding PetMood}" Value="{x:Static models:PetMood.Resting}">
                                    <Setter Property="Visibility" Value="Collapsed"/>
                                </DataTrigger>
                            </Style.Triggers>
                        </Style>
                    </Ellipse.Style>
                    <Ellipse.RenderTransform>
                        <ScaleTransform ScaleY="1"/>
                    </Ellipse.RenderTransform>
                </Ellipse>
                <Ellipse x:Name="RightEye" Canvas.Left="42" Canvas.Top="45" Width="6" Height="8" Fill="#F5F5F5"
                         RenderTransformOrigin="0.5,0.5">
                    <Ellipse.Style>
                        <Style TargetType="Ellipse">
                            <Setter Property="Visibility" Value="Visible"/>
                            <Style.Triggers>
                                <DataTrigger Binding="{Binding PetMood}" Value="{x:Static models:PetMood.Excited}">
                                    <Setter Property="Visibility" Value="Collapsed"/>
                                </DataTrigger>
                                <DataTrigger Binding="{Binding PetMood}" Value="{x:Static models:PetMood.Resting}">
                                    <Setter Property="Visibility" Value="Collapsed"/>
                                </DataTrigger>
                            </Style.Triggers>
                        </Style>
                    </Ellipse.Style>
                    <Ellipse.RenderTransform>
                        <ScaleTransform ScaleY="1"/>
                    </Ellipse.RenderTransform>
                </Ellipse>

                <!-- Normal Face (입만) -->
                <Canvas>
                    <Canvas.Style>
                        <Style TargetType="Canvas">
                            <Setter Property="Visibility" Value="Visible"/>
                            <Style.Triggers>
                                <DataTrigger Binding="{Binding PetMood}" Value="{x:Static models:PetMood.Excited}">
                                    <Setter Property="Visibility" Value="Collapsed"/>
                                </DataTrigger>
                                <DataTrigger Binding="{Binding PetMood}" Value="{x:Static models:PetMood.Resting}">
                                    <Setter Property="Visibility" Value="Collapsed"/>
                                </DataTrigger>
                                <DataTrigger Binding="{Binding PetMood}" Value="{x:Static models:PetMood.Worried}">
                                    <Setter Property="Visibility" Value="Collapsed"/>
                                </DataTrigger>
                            </Style.Triggers>
                        </Style>
                    </Canvas.Style>
                    <!-- Mouth (무표정에 가까운 작은 미소) -->
                    <Path Canvas.Left="28" Canvas.Top="62" Data="M 0,0 Q 7,4 14,0"
                          Stroke="#F5F5F5" StrokeThickness="1.5" Fill="Transparent"/>
                </Canvas>

                <!-- Excited Face (살짝 기쁨) -->
                <Canvas>
                    <Canvas.Style>
                        <Style TargetType="Canvas">
                            <Setter Property="Visibility" Value="Collapsed"/>
                            <Style.Triggers>
                                <DataTrigger Binding="{Binding PetMood}" Value="{x:Static models:PetMood.Excited}">
                                    <Setter Property="Visibility" Value="Visible"/>
                                </DataTrigger>
                            </Style.Triggers>
                        </Style>
                    </Canvas.Style>
                    <!-- Slightly closed happy eyes -->
                    <Path Canvas.Left="20" Canvas.Top="48" Data="M 0,4 Q 5,0 10,4"
                          Stroke="#F5F5F5" StrokeThickness="2" Fill="Transparent"/>
                    <Path Canvas.Left="40" Canvas.Top="48" Data="M 0,4 Q 5,0 10,4"
                          Stroke="#F5F5F5" StrokeThickness="2" Fill="Transparent"/>
                    <!-- Smile -->
                    <Path Canvas.Left="26" Canvas.Top="60" Data="M 0,0 Q 9,8 18,0"
                          Stroke="#F5F5F5" StrokeThickness="1.5" Fill="Transparent"/>
                    <!-- Small blush -->
                    <Ellipse Canvas.Left="14" Canvas.Top="55" Width="8" Height="5"
                             Fill="{DynamicResource BlushBrush}" Opacity="0.5"/>
                    <Ellipse Canvas.Left="48" Canvas.Top="55" Width="8" Height="5"
                             Fill="{DynamicResource BlushBrush}" Opacity="0.5"/>
                </Canvas>

                <!-- Resting Face (졸린/쉬는) -->
                <Canvas>
                    <Canvas.Style>
                        <Style TargetType="Canvas">
                            <Setter Property="Visibility" Value="Collapsed"/>
                            <Style.Triggers>
                                <DataTrigger Binding="{Binding PetMood}" Value="{x:Static models:PetMood.Resting}">
                                    <Setter Property="Visibility" Value="Visible"/>
                                </DataTrigger>
                            </Style.Triggers>
                        </Style>
                    </Canvas.Style>
                    <!-- Closed eyes -->
                    <Path Canvas.Left="20" Canvas.Top="50" Data="M 0,0 L 10,0"
                          Stroke="#F5F5F5" StrokeThickness="2"/>
                    <Path Canvas.Left="40" Canvas.Top="50" Data="M 0,0 L 10,0"
                          Stroke="#F5F5F5" StrokeThickness="2"/>
                    <!-- Neutral mouth -->
                    <Path Canvas.Left="30" Canvas.Top="62" Data="M 0,0 L 10,0"
                          Stroke="#F5F5F5" StrokeThickness="1.5"/>
                    <!-- zzz -->
                    <TextBlock Canvas.Left="52" Canvas.Top="35" Text="z" FontSize="10"
                               Foreground="#666" FontStyle="Italic" Opacity="0.7"/>
                    <TextBlock Canvas.Left="56" Canvas.Top="28" Text="z" FontSize="8"
                               Foreground="#888" FontStyle="Italic" Opacity="0.5"/>
                </Canvas>

                <!-- Worried Face (연체 - 입만, 눈은 공통 사용) -->
                <Canvas>
                    <Canvas.Style>
                        <Style TargetType="Canvas">
                            <Setter Property="Visibility" Value="Collapsed"/>
                            <Style.Triggers>
                                <DataTrigger Binding="{Binding PetMood}" Value="{x:Static models:PetMood.Worried}">
                                    <Setter Property="Visibility" Value="Visible"/>
                                </DataTrigger>
                            </Style.Triggers>
                        </Style>
                    </Canvas.Style>
                    <!-- Neutral/slightly curved mouth -->
                    <Path Canvas.Left="28" Canvas.Top="62" Data="M 0,2 Q 7,0 14,2"
                          Stroke="#F5F5F5" StrokeThickness="1.5" Fill="Transparent"/>
                </Canvas>

                <!-- Yawn Mouth (하품 입 - 애니메이션으로 표시/숨김) -->
                <Ellipse x:Name="YawnMouth" Canvas.Left="29" Canvas.Top="56"
                         Width="12" Height="14"
                         Fill="#F5F5F5"
                         Visibility="Collapsed"
                         RenderTransformOrigin="0.5,0.5">
                    <Ellipse.RenderTransform>
                        <ScaleTransform ScaleY="1"/>
                    </Ellipse.RenderTransform>
                </Ellipse>
            </Canvas>

            <!-- Level Badge -->
            <Border HorizontalAlignment="Center"
                    Margin="0,16,0,4"
                    Background="{DynamicResource SelectedLightBrush}"
                    CornerRadius="8"
                    Padding="8,3">
                <StackPanel Orientation="Horizontal">
                    <TextBlock Text="Lv."
                               FontSize="9"
                               Foreground="{DynamicResource AccentBrush}"
                               VerticalAlignment="Center"/>
                    <TextBlock Text="{Binding PetLevel, Mode=OneWay}"
                               FontSize="10"
                               FontWeight="SemiBold"
                               Foreground="{DynamicResource AccentBrush}"
                               VerticalAlignment="Center"
                               Margin="2,0,0,0"/>
                </StackPanel>
            </Border>
        </StackPanel>
    </Grid>
</UserControl>
